<template>
    <lightning-card title="Account Payments">
        <div class="slds-grid slds-wrap slds-p-around_medium">

            <!-- 1. Account List (Page in Sol Tarafı) -->
            <div class="slds-col slds-size_1-of-3 slds-p-around_small">
                <lightning-combobox
                    name="account"
                    label="Select Account"
                    value={selectedAccountId}
                    options={accountsOptions}
                    onchange={handleAccountChange}>
                </lightning-combobox>
            </div>

            <!-- 2. Payment List (Ortada) -->
            <div class="slds-col slds-size_1-of-3 slds-p-around_small">
                <template if:true={selectedAccountId}>
                    <template if:true={payments.length}>
                        <lightning-datatable
                            key-field="Id"
                            data={payments}
                            columns={columns}>
                        </lightning-datatable>
                    </template>
                    <template if:false={payments.length}>
                        <p>No payments for this account.</p>
                    </template>
                </template>
                <template if:false={selectedAccountId}>
                    <p>Select an account to view payments.</p>
                </template>
            </div>

            <!-- 3. Payment Form (Sağ) -->
            <div class="slds-col slds-size_1-of-3 slds-p-around_small">
                <template if:true={selectedAccountId}>
                    <lightning-combobox
                        name="Payment_Type__c"
                        label="Payment Type"
                        value={newPayment.Payment_Type__c}
                        options={paymentTypeOptions}
                        onchange={handleInputChange}>
                    </lightning-combobox>

                    <lightning-input
                        type="number"
                        name="Amount__c"
                        label="Amount"
                        value={newPayment.Amount__c}
                        onchange={handleInputChange}>
                    </lightning-input>

                    <lightning-input
                        type="date"
                        name="Due_Date__c"
                        label="Due Date"
                        value={newPayment.Due_Date__c}
                        onchange={handleInputChange}>
                    </lightning-input>

                    <lightning-textarea
                        name="Notes__c"
                        label="Notes"
                        value={newPayment.Notes__c}
                        onchange={handleInputChange}>
                    </lightning-textarea>

                    <lightning-button
                        label="Create Payment"
                        onclick={createPaymentRecord}
                        class="slds-m-top_small">
                    </lightning-button>
                </template>
                <template if:false={selectedAccountId}>
                    <p>Select an account to create a payment.</p>
                </template>
            </div>

        </div>
    </lightning-card>
</template>
